var Sum=function(items){var s=0;return items.forEach(function(item){s+=item.val}),s},byPage=function(){return function(items,pageNum,pageLength){for(var filtered=[],i=(pageNum-1)*pageLength;pageNum*pageLength>i;i++)items[i]&&filtered.push(items[i]);return filtered}},NotesList=function($scope){var model={countPages:function(){this.pages=[];for(var i=0;i<this.notes.length;i++)i%this.pageLength||this.pages.push(this.pages.length+1)},GetNotes:function(n){for(var i=0;n>i;i++)this.notes.push({id:i+1,val:100*(n-i),comment:"Some comment"})},EditNote:function(Note){this.notes[Note.id-1]=angular.copy(Note),this.sum=Sum(this.notes),this.countPages()},submit:function(){this.EditNote(this.currentNote),this.editing=!1,this.currentNote={}},cancel:function(){this.editing=!1,this.currentNote={}},NewNote:function(Nid){this.editing=!0,Nid?this.currentNote.id=Nid:this.currentNote.id=model.notes.length+1},notes:[],editing:!1,currentNote:{},pageNum:1,pageLength:10,pages:[]};model.GetNotes(10),model.countPages(),model.sum=Sum(model.notes),$scope.model=model},MyTable=function(){return{restrict:"E",templateUrl:"templates/myTable.html",replace:!0}},EditForm=function(){return{restrict:"E",templateUrl:"templates/EditForm.html",replace:!0}},app=angular.module("app",[]);app.controller("NotesList",NotesList),app.directive("myTable",MyTable),app.directive("editForm",EditForm),app.filter("byPage",byPage);